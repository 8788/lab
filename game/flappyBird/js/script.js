!function(a,b){var c=b.getElementById("main"),d=b.getElementById("score"),e=b.getElementById("ready"),f=b.getElementById("over"),g=b.getElementById("panel"),h=b.getElementById("restart"),i=b.getElementById("start"),j=b.getElementById("fly"),k=b.getElementById("across"),l=b.getElementById("end"),m="start",n=200,o=0,p={ele:b.getElementById("lawn"),start:function(){var a=this.ele,b=parseInt(util.getStyle(a,"width"),10),c=5;a.timer=setInterval(function(){a.offsetLeft<-b/2&&(a.style.left=0),a.style.left=a.offsetLeft-c+"px"},30)},stop:function(){clearInterval(this.ele.timer)}},q={ele:b.getElementById("pillar"),init:function(){for(var a="",b=0;3>b;b++){var d=this._randomPillarHeight();a+='<div class="item" style="left: '+n*b+'px"><div class="item-up" style="height: '+d.up+'px"></div><div class="item-down" style="height: '+d.down+'px"></div></div>'}this.ele.innerHTML=a,this.ele.style.left=2*c.offsetWidth+"px"},start:function(){var a=this,b=a.ele;b.timer=setInterval(function(){b.style.left=b.offsetLeft-4+"px";for(var c=b.children,d=0,e=c.length;e>d;d++)a._check(r,c[d])&&t.over(),t.updateScore(a.bird,c[d]);if(b.offsetLeft<=-n){var f=b.appendChild(b.children[0]),g=a._randomPillarHeight();f.children[0].style.height=g.up,f.children[1].style.height=g.down,a._setPillarPosition(),b.style.left=0}},30)},stop:function(){clearInterval(this.ele.timer)},_randomPillarHeight:function(){var a=c.offsetHeight,b=parseInt(Math.random()*(a-140-140),10)+70,d=a-140-b;return{up:b,down:d}},_setPillarPosition:function(){for(var a=0;3>a;a++)this.ele.children[a].style.left=n*a+"px"},_overlay:function(a,b,c,d,e,f,g,h){return a+c>e&&e+e>a&&b+d>f&&f+h>b?!0:!1},_check:function(a,b){var c=q.ele.offsetLeft,d=10,e={x:b.offsetLeft+c+d,y:0,w:69-2*d,h:b.children[0].offsetHeight},f={x:b.offsetLeft+c+d,y:b.children[1].offsetTop,w:69-2*d,h:b.children[1].offsetHeight};return this._overlay(a.x,a.y,a.w,a.h,e.x,e.y,e.w,e.h)||this._overlay(a.x,a.y,a.w,a.h,f.x,f.y,f.w,f.h)}},r={ele:b.getElementById("bird"),x:90,y:0,w:44,h:30,g:1.5,jumpHeight:60,fly:function(){var a=this,b=a.ele,d=0,e=0,f=Math.sqrt(2*a.g*a.jumpHeight),g=parseInt(b.style.bottom,10),h=c.offsetHeight-b.offsetHeight;g>=h||(clearInterval(b.timer),b.timer=setInterval(function(){d+=.9;var c=f*d-a.g*d*d*.5,h=g+c;0>=h&&t.over(),e=parseInt(g-h)/2,e>90&&(e=90),-30>e&&(e=-30),a.rotate(e),b.style.bottom=h+"px",a.y=b.offsetTop},30))},rotate:function(a){this.ele.style.webkitTransform="rotate("+a+"deg)",this.ele.style.mozTransform="rotate("+a+"deg)",this.ele.style.transform="rotate("+a+"deg)"},died:function(){clearInterval(this.ele.timer),util.addClass(r.ele,"died"),parseInt(this.ele.style.bottom,10)>30&&util.animate(this.ele,{bottom:0},{duration:500,easing:"easeIn"}),util.animate(f,{top:140},{duration:500,type:"easeInOut"}),this.rotate(90)}},s={start:function(){i.play()},fly:function(){j.play()},across:function(){k.play()},end:function(){l.play()}},t={init:function(){e.style.display="block",q.init(),p.start(),this.addEvent()},addEvent:function(){var a=this;util.bindEvent(b,"keydown",function(b){var c=b||event;32===c.keyCode&&"over"!==m&&(a.paly(),s.fly())}),util.bindEvent(b,"touchstart",function(){"over"!==m&&(a.paly(),s.fly())}),util.bindEvent(h,"click",function(){a.reset()}),util.bindEvent(h,"touchstart",function(){a.reset()})},paly:function(){"start"===m&&(this.start(),m="play"),r.fly()},start:function(){q.start(),util.animate(e,{opacity:0},{duration:500})},reset:function(){m="start",d.style.cssText="",e.style.cssText="",e.style.display="block",f.style.cssText="",r.ele.style.bottom="200px",r.rotate(0),util.removeClass(r.ele,"died"),d.innerHTML=0,o=0,this.init(),s.start()},over:function(){m="over",p.stop(),q.stop(),r.died(),s.end(),d.style.display="none",g.children[0].innerHTML=o;try{var a=localStorage.getItem("flappyBirdBestScore")||0;o>=a&&(a=o),g.children[1].innerHTML=a,localStorage.setItem("flappyBirdBestScore",a)}catch(b){g.children[1].innerHTML=o}},updateScore:function(a,b){var c={x:90},e={x:b.offsetLeft+q.ele.offsetLeft,w:69};c.x>e.x&&c.x<=e.x+e.w&&(b.crossing=!0),c.x>e.x+e.w&&b.crossing&&(o+=1,b.crossing=!1,d.innerHTML=o,s.across())}};a.game=t}(window,document),function(a,b){var c={linear:function(a,b,c,d){return c*a/d+b},easeIn:function(a,b,c,d){return c*(a/=d)*a+b},easeOut:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},easeInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b}};a.console||(a.console={log:function(){},error:function(){}}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xa0\u3000\u00A0]+|[\s\uFEFF\xa0\u3000\u00A0]+$/g,"")});var d={getStyle:function(a,b){return a.currentStyle?a.currentStyle[b]:getComputedStyle(a,!1)[b]},getByClass:function(a,c){if(c=c||b,c.getElementsByClassName)return c.getElementsByClassName(a);for(var d=new RegExp("(^|\\s)"+a+"($|\\s)","i"),e=[],f=c.getElementsByTagName("*"),g=0,h=f.length;h>g;g++)d.test(f[g].className)&&e.push(f[g]);return e},bindEvent:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,function(){c.call(a,event)}):a["on"+b]=function(a){var b=a||event;c(b)}},hasClass:function(a,b){if(a.classList)return a.classList.contains(b);var c=new RegExp("(^|\\s)"+b+"($|\\s)","i");return c.test(a.className)},addClass:function(a,b){d.hasClass(a,b)||(a.classList?a.classList.add(b):a.className=(a.className.trim()+" "+b).trim())},removeClass:function(a,b){if(d.hasClass(a,b))if(a.classList)a.classList.remove(b);else{var c=new RegExp("(^|\\s+)"+b+"($|\\s+)","ig");a.className=a.className.replace(c," ").trim()}},toggleClass:function(a,b){d.hasClass(a,b)?removeClass(a,b):d.addClass(a,b)},animate:function(a,b,e){e=e||{},e.duration=e.duration||400,e.easing=e.easing||"linear";var f=+new Date,g={};for(var h in b)g[h]="opacity"===h?Math.round(100*d.getStyle(a,h)):parseInt(d.getStyle(a,h),10);clearInterval(a.timer),a.timer=setInterval(function(){var d=Math.min(+new Date-f,e.duration);for(var h in b){var i=c[e.easing](d,g[h],parseInt(b[h],10)-g[h],e.duration);"opacity"===h?(a.style.opacity=i/100,a.style.filter="alpha(opacity = "+i+")"):a.style[h]=i+"px"}d>=e.duration&&(clearInterval(a.timer),e.complete&&e.complete())},20)}};a.util=d}(window,document);